# ======================================================================================================================
# Author: Sam Dunham (sdunham@nvidia.com)
# ======================================================================================================================

# ======================================================================================================================
# Built-in modules
# ======================================================================================================================
import os
from unittest import unittest

# ======================================================================================================================
# Third-party modules
# ======================================================================================================================
import pytest
from fastapi.testclient import TestClient

# ======================================================================================================================
# Custom modules
# ======================================================================================================================
from app.src.main import app, app_no_auth


# ======================================================================================================================
# Test Clients and Fixtures
# ======================================================================================================================


@pytest.fixture
def no_auth_test_client():
    return TestClient(app_no_auth)


@pytest.fixture
def auth_test_client():
    return TestClient(app)

# ======================================================================================================================
# Test Cases
# ======================================================================================================================


class TestWebApp(unittest.TestCase):
    def setUp(self):
        os.environ["APP_CLIENT_ID"] = "TEST_APP_CLIENT_ID"
        os.environ["TENANT_ID"] = "TEST_TENANT_ID"
        os.environ["OPENAPI_CLIENT_ID"] = "TEST_OPENAPI_CLIENT_ID"
        os.environ["API_SCOPE"] = "TEST_API_SCOPE"
        os.environ["REDIRECT_URL"] = "TEST_REDIRECT_URL"

